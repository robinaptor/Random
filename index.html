<!DOCTYPE html>
<html lang="en">
<head>
  <title>Oblique Strategies - System.css</title>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="https://unpkg.com/@sakun/system.css" />
  <style>
    body {
      background: #c0c0c0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
      padding: 2rem;
      margin: 0;
    }
    #Strategy {
      font-size: 1.2rem;
      font-style: italic;
      text-align: center;
      margin: 1rem 0;
      transition: opacity 0.4s ease;
    }
    #Strategy.fade {
      opacity: 0;
    }
    #history {
      max-height: 8rem;
      overflow-y: auto;
      font-size: 0.9rem;
      padding: 0.5rem;
      background: #fff;
      border: 1px solid #999;
    }
    footer {
      margin-top: 2rem;
      font-size: 0.8rem;
      color: #333;
      text-align: center;
    }
  </style>
</head>
<body>
  <!-- Fenêtre principale -->
  <div class="window" style="width:30rem;">
    <div class="title-bar"> 
      <button aria-label="Close" class="close"></button>
      <h1 class="title">Oblique Strategy</h1>
      <button aria-label="Resize" class="resize"></button>
    </div>
    <div class="separator"></div>
    
    <div class="window-pane">
      <p id="Strategy">Loading...</p>
      <section class="field-row" style="justify-content:center; gap:0.5rem;">
        <button class="btn" id="newBtn">Nouvelle stratégie</button>
        <button class="btn" id="panicBtn" style="background:#ff4444; color:white;">PANIC</button>
      </section>
      <div class="separator"></div>
      <p><b>Historique :</b></p>
      <div id="history"></div>
    </div>
  </div>

  <!-- Fenêtre secondaire (Recherche Google) -->
  <div class="window" style="width:30rem;">
    <div class="title-bar"> 
      <button aria-label="Close" class="close"></button>
      <h1 class="title">Search</h1>
      <button aria-label="Resize" disabled class="hidden"></button>
    </div>
    <div class="separator"></div>
    
    <div class="modeless-dialog">
      <section class="field-row" style="justify-content: flex-start">
        <label for="searchInput" class="modeless-text">Query:</label>
        <input id="searchInput" type="text" style="width:100%;" placeholder="Search on Google…">
      </section>
      <section class="field-row" style="justify-content: flex-end">
        <button class="btn" id="searchBtn" style="width:95px;">Search</button>
      </section>
    </div>
  </div>

  <!-- Fenêtre About -->
  <div class="window" style="width:20rem;">
    <div class="title-bar"> 
      <button aria-label="Close" class="close"></button>
      <h1 class="title">About</h1>
      <button aria-label="Resize" disabled class="hidden"></button>
    </div>
    <div class="separator"></div>
    <div class="window-pane">
      <p><b>Oblique Strategies 95</b><br>
      Version 1.337 (beta)<br>
      © 2025 Totally Serious Software™</p>
      <p><i>"If it works, don’t touch it. If it doesn’t, blame the intern."</i></p>
    </div>
  </div>

  <footer>
    <p>✨ Built with <a href="https://sakun.system.css" target="_blank">System.css</a> ✨</p>
  </footer>

  <script>
    const Strategies = [
      "A line has two sides",
      "Abandon desire",
      "Abandon normal instructions",
      "Accept advice",
      "Accretion",
      "Adding on",
      "Always first steps",
      "Are there sections? Consider transitions",
      "Your mistake was a hidden intention",
      // Ajouts drôles
      "Blame the intern",
      "Turn it off and on again",
      "Pretend it was intentional",
      "Ask the cat for advice",
      "Insert dramatic pause here",
      "404 Strategy Not Found",
      "Dance break (mandatory)"
    ];

    const PanicStrategies = [
      "Unplug everything immediately!",
      "Sacrifice a floppy disk to the gods of retro",
      "Call your mom, she knows what to do",
      "Install more RAM",
      "Just PANIC (you pressed the button, after all)"
    ];

    const historyEl = document.getElementById("history");

    function pickStrategy(list = Strategies) {
      const strategyEl = document.getElementById("Strategy");
      strategyEl.classList.add("fade");
      setTimeout(() => {
        const index = Math.floor(Math.random() * list.length);
        const newStrategy = list[index];
        strategyEl.innerHTML = newStrategy;
        strategyEl.classList.remove("fade");
        addToHistory(newStrategy);
      }, 400);
    }

    function addToHistory(text) {
      const entry = document.createElement("div");
      entry.textContent = "• " + text;
      historyEl.prepend(entry);
    }

    // Initial
    pickStrategy();

    // Boutons
    document.getElementById("newBtn").addEventListener("click", () => pickStrategy());
    document.getElementById("panicBtn").addEventListener("click", () => {
      pickStrategy(PanicStrategies);
      new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play();
    });

    // Espace = nouvelle stratégie
    document.addEventListener("keydown", function(event) {
      if (event.code === "Space") {
        event.preventDefault();
        pickStrategy();
      }
    });

    // Recherche Google
    function doSearch() {
      const query = document.getElementById("searchInput").value.trim();
      if (query) {
        const googleUrl = 'https://www.google.com/search?q=' + encodeURIComponent(query);
        window.open(googleUrl, '_blank');
      }
    }

    document.getElementById("searchBtn").addEventListener("click", doSearch);
    document.getElementById("searchInput").addEventListener("keypress", function(event) {
      if (event.key === 'Enter') {
        doSearch();
      }
    });
  </script>
</body>
</html>
